/**
 * skylark-security-codec - The codec features enhancement for skylark utils.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(s,t){var n=t.define,require=t.require,e="function"==typeof n&&n.amd,i=!e&&"undefined"!=typeof exports;if(!e&&!n){var c={};n=t.define=function(s,t,n){"function"==typeof n?(c[s]={factory:n,deps:t.map(function(t){return function(s,t){if("."!==s[0])return s;var n=t.split("/"),e=s.split("/");n.pop();for(var i=0;i<e.length;i++)"."!=e[i]&&(".."==e[i]?n.pop():n.push(e[i]));return n.join("/")}(t,s)}),resolved:!1,exports:null},require(s)):c[s]={factory:null,resolved:!0,exports:n}},require=t.require=function(s){if(!c.hasOwnProperty(s))throw new Error("Module "+s+" has not been defined");var module=c[s];if(!module.resolved){var n=[];module.deps.forEach(function(s){n.push(require(s))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(s,require){s("skylark-security-codec/codec",["skylark-langx-ns"],function(s){return s.attach("security.codec")}),s("skylark-security-codec/base64",["./codec"],function(s){var t=function(){return t},n="=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return t.encode=function(s){for(var t=[],i=s.length,c=i%3,h=i-c,r=0;r<h;){var l=s[r++]<<16|s[r++]<<8|s[r++];t.push(e.charAt(l>>>18&63)),t.push(e.charAt(l>>>12&63)),t.push(e.charAt(l>>>6&63)),t.push(e.charAt(63&l))}switch(c){case 2:var l=s[r++]<<16|s[r++]<<8;t.push(e.charAt(l>>>18&63)),t.push(e.charAt(l>>>12&63)),t.push(e.charAt(l>>>6&63)),t.push(n);break;case 1:var l=s[r++]<<16;t.push(e.charAt(l>>>18&63)),t.push(e.charAt(l>>>12&63)),t.push(n),t.push(n)}return t.join("")},t.decode=function(s){for(var t=s.split(""),i=[],c=t.length;t[--c]==n;);for(var h=0;h<c;){var r=e.indexOf(t[h++])<<18;h<=c&&(r|=e.indexOf(t[h++])<<12),h<=c&&(r|=e.indexOf(t[h++])<<6),h<=c&&(r|=e.indexOf(t[h++])),i.push(r>>>16&255),i.push(r>>>8&255),i.push(255&r)}for(;0==i[i.length-1];)i.pop();return i},t.isBase64=function(s){if("string"!=typeof s)return!1;if(s.startsWith("data:"))return!0;for(var t=0;t<s.length;t++)if(!e.includes(s.charAt(t)))return!1;return!0},t.removeHeader=function(s){return s.slice(s.search(";base64,")+8)},t.getFileFormat=function(s){var t=s.indexOf("/")+1,n=s.indexOf(";");return s.substr(t,n-t)},t.fromArraybuffer=function(s){for(var t,n="",i=new Uint8Array(s),c=i.byteLength%3,h=i.byteLength-c,r=0;r<h;r+=3)t=i[r]<<16|i[r+1]<<8|i[r+2],n+=e[(16515072&t)>>18]+e[(258048&t)>>12]+e[(4032&t)>>6]+e[63&t];return 1===c?(t=i[h],n+=e[(252&t)>>2]+e[(3&t)<<4]+"=="):2===c&&(t=i[h]<<8|i[h+1],n+=e[(64512&t)>>10]+e[(1008&t)>>4]+e[(15&t)<<2]+"="),n},t.fromBinaryString=function(s){for(var t,n,i,c="",h=s.length%3,r=s.length-h,l=0;l<r;l+=3)t=255&s.charCodeAt(l),n=s.charCodeAt(l+1),i=s.charCodeAt(l+2),c+=e.charAt(t>>2),c+=e.charAt((3&t)<<4|(240&n)>>4),c+=e.charAt((15&n)<<2|(192&i)>>6),c+=e.charAt(63&i);return 1===h?(t=255&s.charCodeAt(l),c+=e.charAt(t>>2),c+=e.charAt((3&t)<<4),c+="=="):2===h&&(t=255&s.charCodeAt(l),n=s.charCodeAt(l+1),c+=e.charAt(t>>2),c+=e.charAt((3&t)<<4|(240&n)>>4),c+=e.charAt((15&n)<<2),c+="="),c},s.base64=t}),s("skylark-security-codec/arithmetic",["./codec"],function(s){"use strict";const t=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];return s.arithmetic={ArithmeticDecoder:class{constructor(s,t,n){this.data=s,this.bp=t,this.dataEnd=n,this.chigh=s[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const s=this.data;let t=this.bp;255===s[t]?s[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=s[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?s[t]<<8:65280,this.ct=8,this.bp=t),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(s,n){let e=s[n]>>1,i=1&s[n];const c=t[e],h=c.qe;let r,l=this.a-h;if(this.chigh<h)l<h?(l=h,r=i,e=c.nmps):(l=h,r=1^i,1===c.switchFlag&&(i=r),e=c.nlps);else{if(this.chigh-=h,0!=(32768&l))return this.a=l,i;l<h?(r=1^i,1===c.switchFlag&&(i=r),e=c.nlps):(r=i,e=c.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&l));return this.a=l,s[n]=e<<1|i,r}}}}),s("skylark-security-codec/main",["./codec","./base64","./arithmetic"],function(s){return s}),s("skylark-security-codec",["skylark-security-codec/main"],function(s){return s})}(n),!e){var h=require("skylark-langx-ns");i?module.exports=h:t.skylarkjs=h}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-security-codec.js.map
