{"version":3,"sources":["skylark-security-codec.js"],"names":["define","skylark","langx","attach","codec","base64","p","tab","encode","ba","s","l","length","rm","x","i","t","push","charAt","join","decode","str","split","out","indexOf","pop","main"],"mappings":";;;;;;;+zBAAAA,EAAA,gCACA,wBACA,uBACA,SAAAC,EAAAC,GAEA,OAAAD,EAAAE,OAAA,uBAEAH,EAAA,iCACA,sBACA,WACA,SAAAE,EAAAE,GAEA,IAAAC,EAAA,WACA,OAAAA,GAGAC,EAAA,IACAC,EAAA,mEAyDA,OAvDAF,EAAAG,OAAA,SAAAC,GAMA,IAHA,IAAAC,KAAAC,EAAAF,EAAAG,OACAC,EAAAF,EAAA,EACAG,EAAAH,EAAAE,EACAE,EAAA,EAAAA,EAAAD,GAAA,CACA,IAAAE,EAAAP,EAAAM,MAAA,GAAAN,EAAAM,MAAA,EAAAN,EAAAM,KACAL,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,GAAA,KACAN,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,GAAA,KACAN,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,EAAA,KACAN,EAAAO,KAAAV,EAAAW,OAAA,GAAAF,IAGA,OAAAH,GACA,KAAA,EACA,IAAAG,EAAAP,EAAAM,MAAA,GAAAN,EAAAM,MAAA,EACAL,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,GAAA,KACAN,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,GAAA,KACAN,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,EAAA,KACAN,EAAAO,KAAAX,GACA,MAEA,KAAA,EACA,IAAAU,EAAAP,EAAAM,MAAA,GACAL,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,GAAA,KACAN,EAAAO,KAAAV,EAAAW,OAAAF,IAAA,GAAA,KACAN,EAAAO,KAAAX,GACAI,EAAAO,KAAAX,GAIA,OAAAI,EAAAS,KAAA,KAGAd,EAAAe,OAAA,SAAAC,GAKA,IAFA,IAAAX,EAAAW,EAAAC,MAAA,IAAAC,KACAZ,EAAAD,EAAAE,OACAF,IAAAC,IAAAL,IACA,IAAA,IAAAS,EAAA,EAAAA,EAAAJ,GAAA,CACA,IAAAK,EAAAT,EAAAiB,QAAAd,EAAAK,OAAA,GACAA,GAAAJ,IAAAK,GAAAT,EAAAiB,QAAAd,EAAAK,OAAA,IACAA,GAAAJ,IAAAK,GAAAT,EAAAiB,QAAAd,EAAAK,OAAA,GACAA,GAAAJ,IAAAK,GAAAT,EAAAiB,QAAAd,EAAAK,OACAQ,EAAAN,KAAAD,IAAA,GAAA,KACAO,EAAAN,KAAAD,IAAA,EAAA,KACAO,EAAAN,KAAA,IAAAD,GAGA,KAAA,GAAAO,EAAAA,EAAAX,OAAA,IAAAW,EAAAE,MACA,OAAAF,GAGAnB,EAAAC,OAAAA,IAGAL,EAAA,+BACA,UACA,YACA,SAAAI,GA/EA,OAAAA,IAEAJ,EAAA,0BAAA,+BAAA,SAAA0B,GAAA,OAAAA","file":"../skylark-security-codec.js","sourcesContent":["define('skylark-security-codec/codec',[\r\n    \"skylark-langx/skylark\",\r\n    \"skylark-langx/langx\"\r\n], function(skylark, langx) {\r\n\r\n\treturn skylark.attach(\"security.codec\",{});\r\n});\ndefine('skylark-security-codec/base64',[\r\n    \"skylark-langx/langx\",\r\n    \"./codec\"\r\n], function(langx,codec) {\r\n\r\n    var base64 = function() {\r\n        return base64;\r\n    }\r\n\r\n\tvar p=\"=\";\r\n\tvar tab=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\r\n\tbase64.encode=function(/* byte[] */ba){\r\n\t\t// summary:\r\n\t\t//\t\tEncode an array of bytes as a base64-encoded string\r\n\t\tvar s=[], l=ba.length;\r\n\t\tvar rm=l%3;\r\n\t\tvar x=l-rm;\r\n\t\tfor (var i=0; i<x;){\r\n\t\t\tvar t=ba[i++]<<16|ba[i++]<<8|ba[i++];\r\n\t\t\ts.push(tab.charAt((t>>>18)&0x3f));\r\n\t\t\ts.push(tab.charAt((t>>>12)&0x3f));\r\n\t\t\ts.push(tab.charAt((t>>>6)&0x3f));\r\n\t\t\ts.push(tab.charAt(t&0x3f));\r\n\t\t}\r\n\t\t//\tdeal with trailers, based on patch from Peter Wood.\r\n\t\tswitch(rm){\r\n\t\t\tcase 2:{\r\n\t\t\t\tvar t=ba[i++]<<16|ba[i++]<<8;\r\n\t\t\t\ts.push(tab.charAt((t>>>18)&0x3f));\r\n\t\t\t\ts.push(tab.charAt((t>>>12)&0x3f));\r\n\t\t\t\ts.push(tab.charAt((t>>>6)&0x3f));\r\n\t\t\t\ts.push(p);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase 1:{\r\n\t\t\t\tvar t=ba[i++]<<16;\r\n\t\t\t\ts.push(tab.charAt((t>>>18)&0x3f));\r\n\t\t\t\ts.push(tab.charAt((t>>>12)&0x3f));\r\n\t\t\t\ts.push(p);\r\n\t\t\t\ts.push(p);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn s.join(\"\");\t//\tstring\r\n\t};\r\n\r\n\tbase64.decode=function(/* string */str){\r\n\t\t// summary:\r\n\t\t//\t\tConvert a base64-encoded string to an array of bytes\r\n\t\tvar s=str.split(\"\"), out=[];\r\n\t\tvar l=s.length;\r\n\t\twhile(s[--l]==p){ }\t//\tstrip off trailing padding\r\n\t\tfor (var i=0; i<l;){\r\n\t\t\tvar t=tab.indexOf(s[i++])<<18;\r\n\t\t\tif(i<=l){ t|=tab.indexOf(s[i++])<<12 };\r\n\t\t\tif(i<=l){ t|=tab.indexOf(s[i++])<<6 };\r\n\t\t\tif(i<=l){ t|=tab.indexOf(s[i++]) };\r\n\t\t\tout.push((t>>>16)&0xff);\r\n\t\t\tout.push((t>>>8)&0xff);\r\n\t\t\tout.push(t&0xff);\r\n\t\t}\r\n\t\t//\tstrip off any null bytes\r\n\t\twhile(out[out.length-1]==0){ out.pop(); }\r\n\t\treturn out;\t//\tbyte[]\r\n\t};\r\n\r\n    return codec.base64 = base64;\r\n});\r\n\ndefine('skylark-security-codec/main',[\r\n    \"./codec\",\r\n    \"./base64\"\r\n], function(codec) {\r\n\r\n\treturn codec;\r\n});\ndefine('skylark-security-codec', ['skylark-security-codec/main'], function (main) { return main; });\n\n"]}